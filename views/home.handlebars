<script>
  function computePageCSS(forPage, scrollPage) {
    let zIndex = 1;
    // When scrollPage === forPage, that means the user is perfectly scrolled
    // to that page (no other page is visible).
    // When scrollPage is in the range [forPage - 1, forPage + 1], we want to
    // make sure our page is moved to the front.
    if (Math.abs(scrollPage - forPage) <= 1) {
      zIndex = 2;
    }
    // We want our opacity to be exactly 1 in the range
    // [forPage - 0.25, forPage + 0.25], and then transition to 0 by the time we
    // get to forPage - 0.75 or forPage + 0.75.
    let opacity = 0;
    if (Math.abs(scrollPage - forPage) <= 0.25) {
      opacity = 1;
    } else if (Math.abs(scrollPage - forPage) <= 0.75) {
      opacity = 1 - (Math.abs(scrollPage - forPage) - 0.25) * 2;
    }
    return {
      zIndex: zIndex,
      opacity: opacity
    };
  }
  $(document).ready(function () {
    $("#site-header").css({
      "z-index": "3"
    });
    $(".link").hover(
      function () {
        $(this).animate({ "width": "+=200" }, 400, 'swing');},
      function () {
        $(this).animate({ "width": "-=200" }, 400, 'swing');
      });
    $(window).on('scroll', function () {
      let height = $(this).scrollTop();
      let windowHeight = window.innerHeight;
      let scrollPage = height / windowHeight;
      // Compute news image CSS styles
      let newsCSS = computePageCSS(1, scrollPage);
      $("#newsImg").css({
          "width": (100 + height / 50) + "%",
          "height": (100 + height / 50) + "%",
          "z-index": newsCSS.zIndex,
          "opacity": newsCSS.opacity
      });
      // Compute sports image CSS styles
      let sportsCSS = computePageCSS(2, scrollPage);
      $("#sportsImg").css({
          "width": (100 + height / 50) + "%",
          "height": (100 + height / 50) + "%",
          "z-index": sportsCSS.zIndex,
          "opacity": sportsCSS.opacity
      });
      // Compute opinion image CSS styles
      let opinionCSS = computePageCSS(3, scrollPage);
      $("#opinionImg").css({
          "width": (100 + height / 50) + "%",
          "height": (100 + height / 50) + "%",
          "z-index": opinionCSS.zIndex,
          "opacity": opinionCSS.opacity
      });
      // Compute weekend image CSS styles
      let weekendCSS = computePageCSS(4, scrollPage);
      $("#wkndImg").css({
          "width": (100 + height / 50) + "%",
          "height": (100 + height / 50) + "%",
          "z-index": weekendCSS.zIndex,
          "opacity": weekendCSS.opacity
      });        
    });
}); 
</script>

<style>
  body,
  html {
    height: 100%;
    margin: 0;
    font-family: ltc-bodoni-175, sans-serif;
  }

  * {
    box-sizing: border-box;
  }
 .title {
    color: white;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.6);
    font-size: 12vw;
    font-style: normal;
    font-weight: 400;
    text-transform: none;
    position: absolute;/* Stay fixed */
    top: 35%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    padding: 20px;
    text-align: center;
  }
  .subtitle {
    color: rgba(255, 255, 255, 1);
    font-size: 6vw;
    font-style: italic;
    font-weight: 400;
    text-transform: none;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.6);
    top: 65%;
    left: 50%;
    white-space: nowrap;
    overflow: auto;
    transform: translate(-50%, -50%);
    z-index: 2;
    padding: 20px;
    text-align: center;
    position: absolute;
    padding-top: 5%;
  }
  .box {
    margin: 40vh 0;
  }
  .link {
    text-align: center;
    color: white;
    font-weight: bold;
    overflow-y: hidden;
    overflow-x: auto;
    font-size: 11.5vw;
    margin: 0 auto;
    height: 20vh;
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/opacity/see-through */
    border: 1.2vh solid #f1f1f1;
    z-index: 10;
    padding-left: 2vh;
    padding-right: 2vh;
    
  
  }
  .headings {
    display: flex;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
  } 
  
  .bg {
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
  }
  #newsImg {
    position: sticky;
    z-index: 2;
    top: 100vh;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }
  #sportsImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }
  #opinionImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }
  #wkndImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width:200vw; 
    height: 150vh;
    object-fit: cover;
  }
  .headImg {
    background-position: center bottom;
    border-bottom: .4vh solid #f1f1f1;
    position: relative;
    width: 100%;
    height: 100%;
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    z-index: 9;
    background-image:
      linear-gradient(to bottom, rgba(185, 185, 250, 0.815), rgba(255, 255, 255, 0)),
      url('public/imgs/cropped.jpg');
  }
  @media(max-width:1100px) {
    .headImg {
      background-attachment: scroll;
      overflow-y: scroll;
    }
    .desktop{
      display: none; 
    }
    #site-header{
      display: none;
    }
    #mobile-header{
      display: block;
      margin: 0 auto; 
      z-index: 10; 
    }
    .sidenav {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: white;
      overflow-x: hidden;
      transition: 0.5s;
      padding-top: 60px;
    }

    .sidenav a {
      padding: 0 0 4vw 4vw;
      text-decoration: none;
      font-size: 8vw;
      color: #818181;
      display: block;
      transition: 0.3s;
      line-height: 1.2;
    }
    #bar_nav {
        border-bottom: 1px solid #D3D3D3;
    }

    .sidenav a:hover {
      color: #f1f1f1;
    }

    .sidenav .closebtn {
      position: absolute;
      top: 0;
      right: 25px;
      font-size: 36px;
      margin-left: 50px;
    } 
    #shift {
        margin-top: -9%;
        width: 5vw;
    }
    .mobile {
      display: block; 
    }
    #mobileNews{
      background-position: center;
      background-image:
        linear-gradient(to bottom, rgba(255, 255, 255, 0) 60%, #000000c0 100%),

        url(public/imgs/NewsLanding_LukasFlippo.jpg);
    }
    #mobileSports{
      background-position: 63% 60%; 
      background-image: 
      linear-gradient(to bottom, rgba(255, 255, 255, 0) 60%, #000000 100%),
      linear-gradient(to top, rgba(255, 255, 255, 0) 60%, #000000c0 100%),
      url(public/imgs/SportsLanding_LukasFlippo.jpg);
    }
    #mobileOpinion{
      background-position: 55% 70%; 
      background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0) 60%, #000000 100%),
      linear-gradient(to top, rgba(255, 255, 255, 0) 60%, #000000e5 100%),
      url(public/imgs/OpinionLanding_DavidZheng.jpg);
    }
    #mobileWknd{
      background-position: 55% 70%;
      background-image:
        linear-gradient(to top, rgba(255, 255, 255, 0) 70%, #000000c0 100%),
        url(public/imgs/WKNDLanding_ZoeBerg.JPG);
    }
    .mobileBg{
       background-size: contain;
       background-size: cover;
       height: 100vh;
       width: 100vw; 
       background-attachment: scroll;
       background-position: center;
       overflow-y: auto; 
     
      background-repeat: no-repeat;
    }
   
  .bg-text {
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0, 0.4); /* Black w/opacity/see-through */
    color: white;
    font-weight: bold;
    font-size: 11vh;
    text-decoration: none; 
    border: 1.2vh solid #f1f1f1;
    position: absolute; /* Stay fixed */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    width: 80vw;
    padding: 20px;
    text-align: center;
    overflow-x: hidden;
    text-align: center;
  }
  a {
    text-decoration: none;
    color: white; 
    overflow-x: auto;
  }
 

    

  }
}
</style>


<body>

  <div class="headImg">
    <div class="title">Commencement 2020</div>
    <div class="subtitle">4 Years in Review</div>
  </div>
  <div class= "desktop">
    <div class="bg" id="one">
      <img id="newsImg" src="public/imgs/NewsLanding_LukasFlippo.jpg"></img>
    </div>
    <div class="bg" id="two">
      <img id="sportsImg" src="public/imgs/SportsLanding_LukasFlippo.jpg"></img>
    </div>
    <div class="bg">
      <img id="opinionImg" src="public/imgs/OpinionLanding_DavidZheng.jpg"></img>
    </div>
    <div class="bg">
      <img id="wkndImg" src="public/imgs/WKNDLanding_ZoeBerg.JPG"></img>
    </div>
    <div class="headings">
      <div class="box">
        <a class="link" href='/news'>News</a>
      </div>
      <div class="box">
        <a class="link" href='/sports'>Sports</a>
      </div>
      <div class="box">
        <a class="link" href='/opinion'>Opinion</a>
      </div>
      <div class="box">
        <a class="link" href='/wknd'>WKND</a>
      </div>
    </div>
  </div>
  <div class= "mobile">
    <div class="mobileBg" id="mobileNews">
       <div class="container" id="container1"></div>
      <div class="bg-text" id="imgformat1">
        <a href='/news'>News</a>
      </div>
    </div>
    <div class="mobileBg" id="mobileSports">
      <div class="container" id="container1"></div>
      <div class="bg-text" id="imgformat1">
        <a href='/sports'>Sports</a>
      </div>
    </div>
    <div class="mobileBg" id="mobileOpinion">
      <div class="container" id="container2"></div>
      <div class="bg-text" id="imgformat2">
        <a href='/opinion'>Opinion</a>
      </div>
    </div>
    <div class="mobileBg" id="mobileWknd">
      <div class="container" id="container3"></div>
      <div class="bg-text" id="imgformat3">
        <a href='/wknd'>WKND</a>
      </div>
    </div>
  </div>
</body>