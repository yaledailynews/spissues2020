<script>
  function computePageCSS(forPage, scrollPage) {
    let zIndex = 1;

    // When scrollPage === forPage, that means the user is perfectly scrolled
    // to that page (no other page is visible).

    // When scrollPage is in the range [forPage - 1, forPage + 1], we want to
    // make sure our page is moved to the front.
    if (Math.abs(scrollPage - forPage) <= 1) {
      zIndex = 2;
    }

    // We want our opacity to be exactly 1 in the range
    // [forPage - 0.25, forPage + 0.25], and then transition to 0 by the time we
    // get to forPage - 0.75 or forPage + 0.75.
    let opacity = 0;
    if (Math.abs(scrollPage - forPage) <= 0.25) {
      opacity = 1;
    } else if (Math.abs(scrollPage - forPage) <= 0.75) {
      opacity = 1 - (Math.abs(scrollPage - forPage) - 0.25) * 2;
    }

    return {
      zIndex: zIndex,
      opacity: opacity
    };
  }

  $(document).ready(function () {
    $("#site-header").css({
      "z-index": "3"
    });

    $(".link").hover(
      function () {
        $(this).animate({ "width": "+=200" }, 400, 'swing');},
      function () {
        $(this).animate({ "width": "-=200" }, 400, 'swing');
      });

    $(window).on('scroll', function () {
      let height = $(this).scrollTop();
      let windowHeight = window.innerHeight;
      let scrollPage = height / windowHeight;

      // Compute news image CSS styles
      let newsCSS = computePageCSS(1, scrollPage);
      $("#newsImg").css({
          "width": (100 + height / 20) + "%",
          "height": (100 + height / 20) + "%",
          "z-index": newsCSS.zIndex,
          "opacity": newsCSS.opacity
      });

      // Compute sports image CSS styles
      let sportsCSS = computePageCSS(2, scrollPage);
      $("#sportsImg").css({
          "width": (100 + height / 20) + "%",
          "z-index": sportsCSS.zIndex,
          "opacity": sportsCSS.opacity
      });

      // Compute opinion image CSS styles
      let opinionCSS = computePageCSS(3, scrollPage);
      $("#opinionImg").css({
          "width": (100 + height / 20) + "%",
          "z-index": opinionCSS.zIndex,
          "opacity": opinionCSS.opacity
      });

      // Compute weekend image CSS styles
      let weekendCSS = computePageCSS(4, scrollPage);
      $("#wkndImg").css({
          "width": (100 + height / 20) + "%",
          "z-index": weekendCSS.zIndex,
          "opacity": weekendCSS.opacity
      });

      /*if (height < 1200) {
        console.log("testing");
        $("#newsImg").css({
          width: (100 + height / 20) + "%",
          "z-index": "2",
          "opacity": "1",
        });
        $("#wknd").css({
          width: (100 + height / 20) + "%",
          "z-index": "1",
          "opacity": "0",
        });
      }
      if (height > 1200) { 
        $("#newsImg").css({
          "z-index": "1",
          "transition": "opacity 2s ease-in-out",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((elementHeight - height / 1.3) / elementHeight);
            return opacity;
          }
        });
        $("#sportsImg").css({
          width: (100 + height / 20) + "%",
          "z-index": "2",
          "transition": "opacity 2s ease-in-out",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((1 - (elementHeight - height) / height) * 0.8) + 0.2;
            return opacity;
          }
        });
      }

      if (height > 2100) { 
        $("#sportsImg").css({
          "z-index": "1",
          "transition": "opacity 2s ease-in-out",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((elementHeight - height / 1.3) / elementHeight);
            return opacity;
          }
        });
        $("#opinionImg").css({
          width: (100 + height / 20) + "%",
          "z-index": "2",
          "transition": "opacity 1s ease-in-out",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((1 - (elementHeight - height) / height) * 0.8) + 0.2;
            return opacity;
          }
        });
      }
      if (height > 3100) {
        $("#opinionImg").css({
          "z-index": "1",
          "transition": "opacity 2s ease-in-out",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((elementHeight - height / 3) / elementHeight);
            return opacity;
          }
          });
        $("#wkndImg").css({
          width: (100 + height / 20) + "%",
          "transition": "opacity 1s ease-in-out",
          "z-index": "2",
          opacity: function () {
            let elementHeight = $(this).height(),
              opacity = ((1 - (elementHeight - height) / height) * 0.5) + 0.2;
            return opacity;
          }
        });*/   
    });
}); 
</script>

<style>
  body,
  html {
    height: 100%;
    margin: 0;
    font-family: ltc-bodoni-175, sans-serif;
  }

  body {
    background-attachment: scroll;
  }

  * {
    box-sizing: border-box;
  }

 .title {
    color: white;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.6);
    font-size: 12vw;
    font-style: normal;
    font-weight: 400;
    text-transform: none;
    position: absolute;/* Stay fixed */
    top: 35%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    padding: 20px;
    text-align: center;
  }

  .subtitle {
    color: rgba(255, 255, 255, 1);
    font-size: 6vw;
    font-style: italic;
    font-weight: 400;
    text-transform: none;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.6);
    top: 65%;
    left: 50%;
    white-space: nowrap;
    overflow: auto;
    transform: translate(-50%, -50%);
    z-index: 2;
    padding: 20px;
    text-align: center;
    position: absolute;
    padding-top: 5%;
  }
  .box {
    margin: 40vh 0;
  }

  .link {
    text-align: center;
    color: white;
    font-weight: bold;
    overflow-y: hidden;
    overflow-x: auto;
    font-size: 11.5vw;
    margin: 0 auto;
    height: 20vh;
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/opacity/see-through */
    border: 1.2vh solid #f1f1f1;
    line-height: 20vh;
    z-index: 10;
    padding-left: 2vh;
    padding-right: 2vh;
  }

  /* Images used 
  #sportsImg {
    background-image: url("public/imgs/SportsLanding_LukasFlippo.jpg");
  }

  #opinionImg {
    background-image: url("public/imgs/OpinionLanding_DavidZheng.jpg");
  }

  #wkndImg {
    background-image: url("public/imgs/WKNDLanding_ZoeBerg.JPG");
  }

  #newsImg {
    background-image: url("public/imgs/NewsLanding_LukasFlippo.jpg");
  }*/


  .headings {
    display: flex;
    display: flex;
     
    justify-content: center;
    flex-direction: column;
    align-items: center;
  }



  .bg {
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
  }

  #newsImg {
    position: sticky;
    z-index: 2;
    top: 100vh;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }

  #sportsImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }


  #opinionImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }

  #wkndImg {
    position: sticky;
    z-index: 1;
    top: 100vh;
    opacity: 0;
    width: 200vw;
    height: 150vh;
    object-fit: cover;
  }
  .headImg {
    background-position: center bottom;
    border-bottom: .4vh solid #f1f1f1;
    position: relative;
    width: 100%;
    height: 100%;
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    z-index: 9;
    background-image:
      linear-gradient(to bottom, rgba(185, 185, 250, 0.815), rgba(255, 255, 255, 0)),
      url('public/imgs/cropped.jpg');
  }

 .option1{
  position: sticky; 
  background-attachment: scroll;
  background-repeat: no-repeat;
  background-size: cover;
  top: 100vh; 
  height: 100vh;
  width: 100vw; 
  background-image: url(public/imgs/NewsLanding_LukasFlippo.jpg);
 }
</style>

<body>

  <div class="headImg">
    <div class="title">Commencement 2020</div>
    <div class="subtitle">4 Years in Review</div>
  </div>
    <!--<div class="option1"></div>-->


  <div class="bg" id="one">
    <img id="newsImg" src="public/imgs/NewsLanding_LukasFlippo.jpg"></img>
  </div>
  <div class="bg" id="two">
    <img id="sportsImg" src="public/imgs/SportsLanding_LukasFlippo.jpg"></img>
  </div>
  <div class="bg">
    <img id="opinionImg" src="public/imgs/OpinionLanding_DavidZheng.jpg"></img>
  </div>
  <div class="bg">
    <img id="wkndImg" src="public/imgs/WKNDLanding_ZoeBerg.JPG"></img>
  </div>
  <div class="headings">
    <div class="box">
      <a class="link" href='/news'>News</a>
    </div>
    <div class="box">
      <a class="link" href='/sports'>Sports</a>
    </div>
    <div class="box">
      <a class="link" href='/opinion'>Opinion</a>
    </div>
    <div class="box">
      <a class="link" href='/wknd'>WKND</a>
    </div>
  </div>
</body>
